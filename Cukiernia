package uz.zgora.pwir.lab3a;


public class Cukiernia 
{
	private int wolne_msc_1;
	private int wolne_msc_2;
	
	int paczki_okna;
	
	public Cukiernia(int wolne_msc_1, int wolne_msc_2, int paczki_okna) 
	{
		this.wolne_msc_1 = wolne_msc_1;
		this.wolne_msc_2 = wolne_msc_2;
		System.out.println("Cukiernia zaprasza");
		System.out.println("Wolne miejsca do okienka 1 to " + wolne_msc_1);
		System.out.println("Wolne miejsca do okienka 2 to " + wolne_msc_2);
		
		this.paczki_okna = paczki_okna;
		System.out.println("Dodano pączki dla okienek = " + paczki_okna);
	}
	
	
	private void komunikat(String text)
	{
		System.out.println("Cukiernia: " + text);
	}
	
	private void infoPaczek(String text)
	{
		System.err.println("INFO PACZKI: " + text);
	}
		
	synchronized boolean wejscieCukiernia1(Kupujacy kupujacy) 
	{
		if(wolne_msc_1 > 0)
		{
			komunikat(kupujacy.getKupujacy() + " wszedł" + "\n Pozostało wolnych miejsc " + wolne_msc_1);
			wolne_msc_1--;
			infoPaczek("Sprzedano w oknie 1 pączka. Pozostało " + paczki_okna + " paczków");
			paczki_okna--;
			return true;
		}
		else
		{
			komunikat(kupujacy.getKupujacy() + " kolejka jest pełna "+ "\n Pozostało wolnych miejsc " + wolne_msc_1);
		}
		return false;
	}
	
	synchronized boolean wejscieCukiernia2(Kupujacy kupujacy) 
	{
		if(wolne_msc_2 > 0) 
		{
			komunikat(kupujacy.getKupujacy() + " wszedł" + "\n Pozostało wolnych miejsc " + wolne_msc_2);
			wolne_msc_2--;
			infoPaczek("Sprzedano w oknie 2 pączka. Pozostało " + paczki_okna + " paczków");
			paczki_okna--;
			return true;	
		}
		else
		{
			komunikat(kupujacy.getKupujacy() + " kolejka jest pełna "+ "\n Pozostało wolnych miejsc " + wolne_msc_2);
		}
		return false;
	}
	
	synchronized boolean opuscilCukiernie(Kupujacy kupujacy)
	{
		komunikat(kupujacy.getKupujacy()+" Ale się najadł."+ " Pozostało wolnych miejsc " + wolne_msc_1 + " ");
		wolne_msc_1++;
		return true;
	}	
	
	synchronized boolean opuscilCukiernie2(Kupujacy kupujacy)
	{
		komunikat(kupujacy.getKupujacy()+" Ale się najadł."+ " Pozostało wolnych miejsc " + wolne_msc_2 + " ");
		wolne_msc_2++;
		return true;
	}
}
